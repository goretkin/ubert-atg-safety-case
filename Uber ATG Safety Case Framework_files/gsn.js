(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{DtPh:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gsn",function(){var e=a("WB0h");return{page:e.default||e}}])},WB0h:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),i=a.n(n),o=a("TSYQ"),l=a.n(o),c=a("m/Pd"),r=a.n(c),s=a("/MKj"),d=a("Qi1R"),h=a("kQFM"),u=a("0iUn"),m=a("sLSF"),p=a("MI3g"),f=a("a7VT"),g=a("Tit0"),v=a("/jUN"),E=a("fSvH"),b=a("CssJ"),y=a.n(b),w=function(e){function t(){var e,a,n;Object(u.default)(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return Object(p.default)(n,(a=n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(o))),n.handleClick=function(e){return function(){var t=n.props.activePath,a=t[e].id,i=t[e+1].id;0===e?n.props.expandAll(!1):(n.props.expandGoal(i,!1),n.props.scrollIntoView(a)),n.props.setActive(a)}},a))}return Object(g.default)(t,e),Object(m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.activeNode,n=t.activePath;return i.a.createElement("header",{className:y.a.header},i.a.createElement(E.a,{className:y.a.logo,href:"https://www.uber.com/us/en/atg/"}),i.a.createElement("div",{className:y.a.breadcrumbs},i.a.createElement(v.a,{to:"/safetycase",theme:"breadcrumb"},"Home"),n.map(function(t,n){return i.a.createElement(i.a.Fragment,{key:"goal-".concat(n)},i.a.createElement("span",{className:y.a.chevron},">"),i.a.createElement(v.a,{theme:"breadcrumb",disabled:a.id===t.id,onClick:e.handleClick(n)},"0"===t.id?"Safety Case Framework":t.label))})))}}]),t}(n.Component),k=Object(s.b)(function(e){return{activePath:e.activePath,activeNode:e.activeNode,data:e.data}},{expandAll:h.b,expandGoal:h.c,setActive:h.l,scrollIntoView:h.k})(w),N=a("t1TU"),C=a("Zu15"),x=a("vYYK"),O=a("+p5S"),j=a("uN2k"),S=a.n(j),T=function(e){var t=e.onClick,a=e.isFaded,n=e.width,o=e.height,c=(n-18)/2,r=(o-18)/2,s=l()(S.a.fill,Object(x.a)({},S.a.isFaded,a)),d=l()(S.a.button,Object(x.a)({},S.a.disabled,a));return i.a.createElement("g",{className:d,onClick:t},i.a.createElement("rect",{width:n,height:o,className:S.a.background}),i.a.createElement("g",{transform:"translate(".concat(c,", ").concat(r,")"),className:s},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 0C4.9 0 0 4.9 0 11C0 17.1 4.9 22 11 22C17.1 22 22 17.1 22 11C22 4.9 17.1 0 11 0ZM11 19C6.6 19 3 15.4 3 11C3 6.6 6.6 3 11 3C15.4 3 19 6.6 19 11C19 15.4 15.4 19 11 19ZM9.5 10V17H12.5V10H9.5ZM13 7C13 8.10457 12.1046 9 11 9C9.89543 9 9 8.10457 9 7C9 5.89543 9.89543 5 11 5C12.1046 5 13 5.89543 13 7Z",fill:"currentColor"})))};T.defaultProps={width:18,height:18};var I=T,P=a("Gc3G"),F=a.n(P),z=function(e){var t=e.onMouseDown,a=e.pos,n=e.size,o={left:"".concat(a.x,"px"),top:"".concat(a.y,"px"),height:"".concat(Math.round(n.height),"px"),width:"".concat(Math.round(n.width),"px")};return i.a.createElement("div",{style:o,className:F.a.indicator,onMouseDown:t})},L=a("doui"),A=function(e,t,a,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000";e.save(),e.fillStyle=o,e.beginPath(),e.rect(t,a,n,i),e.closePath(),e.fill(),e.restore()},M=function(e,t,a,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000",l={x:30,y:5},c={x:n-5,y:5},r={x:n-30,y:i-5},s={x:5,y:i-5};e.save(),e.fillStyle=o,e.beginPath(),e.moveTo(l.x,l.y),e.lineTo(c.x,c.y),e.lineTo(r.x,r.y),e.lineTo(s.x,s.y),e.closePath(),e.fill(),e.restore()},R=function(e,t,a,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000";e.save(),e.fillStyle=o,e.beginPath(),e.ellipse(t+n/2,a+i/2,n/2,i/2,0,0,2*Math.PI),e.closePath(),e.fill(),e.restore()},H=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000";e.save(),e.strokeStyle=i,e.lineWidth=20,e.beginPath(),e.moveTo(t,a),e.lineTo(t,a+n),e.stroke(),e.restore()},W=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000";e.save(),e.strokeStyle=i,e.lineWidth=20,e.beginPath(),e.moveTo(t,a),e.lineTo(t+n,a),e.stroke(),e.restore()};function B(e,t,a,i){var o=Object(n.useRef)({});Object(n.useEffect)(function(){o.current=t.current.getContext("2d"),function(e,n){var i=window.devicePixelRatio;function o(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(a&&t&&t.length>0){var n=0;t.forEach(function(t){!function(t,a){var n=O.a(t.contentTypeId),i="Solution"===t.type,l=Math.max(t.nodeWidth||n.width,i?220:n.width),c=Math.max(t.nodeHeight||n.height,i?220:n.height),r=(n.width-l)/2,s=c+n.heightLines;e.save(),e.translate(a,0),function(t,a,n,i){var o=t.type||t.contentTypeId,l=7+a,c=n-14,r=i-14;"Solution"===o?R(e,l,7,c,r):"Strategy"===o?M(e,l,7,c,r):A(e,l,7,c,r)}(t,r,l,c),0===a?H(e,n.width/2,0,-100):(H(e,n.width/2,0,-50),W(e,n.width/2,-50,-a));e.translate(0,s),o(t.children,t.isExpanded),e.restore()}(t,n),n+=t.w})}}e.clearRect(0,0,t.current.width,t.current.height),e.scale(a*i,a*i),e.translate(0,n.nodeHeight),o(n.children)}(o.current,e)},[e,t,a,i])}var G=function(e){var t=e.size,a=e.root,o=e.scale,l=Object(n.useRef)(null),c=Object(n.useState)(1),r=Object(L.default)(c,2),s=r[0],d=r[1];B(a,l,o,t),Object(n.useEffect)(function(){d(window.devicePixelRatio)},[]);var h={width:"".concat(t.width,"px"),height:"".concat(t.height,"px")};return i.a.createElement("canvas",{ref:l,className:F.a.canvas,style:h,width:t.width*s,height:t.height*s})},U=a("oqrN"),V=a("ln4S"),D=.03,Z=function(e){function t(){var e,a,n;Object(u.default)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return Object(p.default)(n,(a=n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(l))),n.state={isCollapsed:!1,scrollPos:{x:0,y:0},indicatorPos:{x:0,y:0},viewportSize:{width:0,height:0},canvasSize:{width:0,height:0},scale:D},n.ref=i.a.createRef(),n.handleResize=function(){n.updateCanvasSize()},n.handleScroll=function(){n.setState({scrollPos:{x:n.elScroll.scrollLeft,y:n.elScroll.scrollTop}})},n.handleMouseDown=function(e){n.dragStart(),n.dragStartX=e.screenX,n.dragStartY=e.screenY,n.scrollStartX=n.state.scrollPos.x,n.scrollStartY=n.state.scrollPos.y},n.handleMouseMove=function(e){var t=e.screenX,a=e.screenY,i=n.state.scale/n.props.zoom,o=(t-n.dragStartX)/i,l=(a-n.dragStartY)/i;n.elScroll.scrollTo({left:Math.round(n.scrollStartX+o),top:Math.round(n.scrollStartY+l)})},n.handleMouseUp=function(){n.dragEnd()},n.handleToggle=function(){n.setState(function(e){return{isCollapsed:!e.isCollapsed}})},a))}return Object(g.default)(t,e),Object(m.default)(t,[{key:"componentDidMount",value:function(){this.elScroll=Object(d.b)(this.ref.current),this.elScroll.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentDidUpdate",value:function(e){e.gsnWidth===this.props.gsnWidth&&e.gsnHeight===this.props.gsnHeight||this.updateCanvasSize()}},{key:"componentWillUnmount",value:function(){this.elScroll.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize),this.dragEnd()}},{key:"dragStart",value:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}},{key:"dragEnd",value:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"updateCanvasSize",value:function(){var e=this.props,t=e.gsnWidth,a=e.gsnHeight,n=t*D>window.innerWidth-120?(window.innerWidth-120)/t:D,i=a*D>200?200/a:D,o=Math.min(n,i);this.setState({canvasSize:{width:t*o,height:a*o},viewportSize:{width:window.innerWidth,height:window.innerHeight},scale:o})}},{key:"render",value:function(){var e=this.props,t=e.gsn,a=e.zoom,n=this.state,o=n.isCollapsed,c=n.scrollPos,r=n.viewportSize,s=n.canvasSize,d=n.scale,h=l()(F.a.container,Object(x.a)({},F.a.isActive,!o)),u=l()(F.a.panel,Object(x.a)({},F.a.isActive,!o)),m=l()(F.a.button,Object(x.a)({},F.a.mapButton,o)),p={x:c.x*d/a,y:c.y*d/a},f={width:r.width*d/a,height:r.height*d/a};return i.a.createElement("section",{className:h,ref:this.ref},i.a.createElement("div",{className:u},i.a.createElement(z,{pos:p,size:f,onMouseDown:this.handleMouseDown}),i.a.createElement(G,{root:t,size:s,scale:d})),i.a.createElement("button",{className:m,onClick:this.handleToggle},i.a.createElement(U.a,{iconType:o?"map":"chevron"})),o&&i.a.createElement(V.a,{as:"span",theme:"bodyCopy",className:F.a.label},"Show minimap"))}}]),t}(i.a.Component),Y=Object(s.b)(function(e){return{zoom:e.zoom}})(Z),X=a("Ng1K"),_=a.n(X),Q=function(e){var t,a=e.width,n=e.height,o=e.nodeType,c=e.nodeGeom,r=e.isFaded,s=e.flash,d=c.strokeWidth,h=l()(_.a.background,(t={},Object(x.a)(t,_.a.isFaded,r),Object(x.a)(t,_.a.isFlashing,"in"===s),Object(x.a)(t,_.a.isFlashingOut,"out"===s),t));if("Solution"===o)return i.a.createElement("circle",{cx:a/2,cy:n/2,r:(a-d)/2,strokeWidth:d,className:h});if("Strategy"===o){var u="".concat(3*d,",").concat(d/2),m="".concat(a-d/2,",").concat(d/2),p="".concat(a-3*d,",").concat(n-d/2),f="".concat(d/2,",").concat(n-d/2),g="".concat(u," ").concat(m," ").concat(p," ").concat(f);return i.a.createElement("polygon",{points:g,strokeWidth:d,className:h})}return i.a.createElement("rect",{x:d/2,y:d/2,width:a-d,height:n-d,strokeWidth:d,className:h})},J=a("1PuL"),q=a.n(J),K=function(e){var t,a=e.width,n=e.height,o=e.contentWidth,c=e.contentHeight,r=e.isFaded,s=e.node,d=e.nodeGeom,h=e.onInfoClick,u=d.strokeWidth,m="gsnTopLevel"===s.contentTypeId,p="Solution"===s.type,f="Strategy"===s.type,g=l()(q.a.inner,(t={},Object(x.a)(t,q.a.isTopLevel,m),Object(x.a)(t,q.a.isFaded,r),Object(x.a)(t,q.a.isCircle,p),Object(x.a)(t,q.a.isParallelogram,f),t)),v=(a-o)/2,E=p?{padding:"".concat((n-c)/2+20,"px ").concat(v+20,"px"),width:"100%",height:"100%"}:{},b=m?"goalCopy":"smallCopy";return i.a.createElement("foreignObject",{x:u,y:u,width:a-2*u,height:n-2*u,className:q.a.contents},i.a.createElement("div",{className:g,style:E},i.a.createElement("div",null,i.a.createElement(V.a,{as:"h2",theme:"label",className:q.a.title},s.label,"Solution"===s.type&&s.additionalInfo&&s.additionalInfo.length>0&&i.a.createElement("svg",{className:q.a.infoButton},i.a.createElement("g",null,i.a.createElement(I,{isFaded:r,onClick:h,width:40,height:36})))),s.headline&&i.a.createElement(V.a,{as:"h3",theme:"largeLabel",className:q.a.title},s.headline),i.a.createElement(V.a,{as:"p",theme:b,className:q.a.description},s.description))))},$=a("YLV/"),ee=a.n($),te=function(e){var t,a=e.x,n=e.y,o=e.isFaded,c=e.flash,r=e.strokeWidth,s=e.className,d=(32-r)/2,h={strokeWidth:r},u=l()(ee.a.diamond,(t={},Object(x.a)(t,ee.a.isFaded,o),Object(x.a)(t,ee.a.isFlashing,"in"===c),Object(x.a)(t,ee.a.isFlashingOut,"out"===c),t));return i.a.createElement("g",{transform:"translate(".concat(a,", ").concat(n,")"),className:s,style:h},i.a.createElement("polyline",{points:"".concat(-d-r-7," 0, 0 0"),className:ee.a.diamondBackground}),i.a.createElement("rect",{x:-d,y:-d,width:2*d,height:2*d,className:u}))};te.defaultProps={isFaded:!1,strokeWidth:10};var ae=te,ne=a("w6bR"),ie=a.n(ne),oe=function(e){var t,a=e.onClick,n=e.isExpanded,o=e.isFaded,c=e.inPanel,r=e.width,s=e.height,d=(r-18)/2,h=(s-18)/2,u=l()(ie.a.lines,(t={},Object(x.a)(t,ie.a.isExpanded,n),Object(x.a)(t,ie.a.isFaded,o),Object(x.a)(t,ie.a.inPanel,c),t));return i.a.createElement("g",{className:ie.a.button,onClick:a},i.a.createElement("rect",{width:r,height:s,className:ie.a.background}),i.a.createElement("g",{transform:"translate(".concat(d,", ").concat(h,")"),className:u},i.a.createElement("line",{x1:"9",x2:"9",y2:"18",className:ie.a.horizontalLine}),i.a.createElement("line",{y1:"9",x2:"18",y2:"9"})))};oe.defaultProps={isExpanded:!1,inPanel:!1,width:18,height:18};var le=oe,ce=function(e){var t=e.x,a=e.y,n=e.className,o=e.onClick;return i.a.createElement("g",{transform:"translate(".concat(t,", ").concat(a,")"),className:l()(n,ee.a.arrow),onClick:o},i.a.createElement("rect",{x:"-40",y:"-25",width:"60",height:"50",stroke:"none",fill:"transparent"}),i.a.createElement("g",null,i.a.createElement("polyline",{points:"-11 0, -31 0",className:ee.a.arrowShaft}),i.a.createElement("polygon",{points:"6 0, -10 -22, -21 -22, -5 0, -21 22, -10 22",className:ee.a.arrowBackground}),i.a.createElement("polygon",{points:"0 0, -16 -22, -27 -22, -11 0, -27 22, -16 22",className:ee.a.arrowForeground})))},re=function(e){var t,a=e.nodeGeom,n=e.x,o=e.dist,c=e.isFaded,r=e.isHighlighted,s=e.showLineArrow,d=e.onClick,h=e.onArrowClick,u=O.b,m=u.radius,p=u.overlap,f="M".concat(a.width/2,",").concat(a.heightLines+p),g="a".concat(m,",").concat(m,",0,0,1,").concat(-m,",").concat(-m),v="a".concat(m,",").concat(m,",0,0,0,").concat(-m,",").concat(-m),E="v".concat(-(a.heightLines+2*p-2*m)/2),b="h".concat(2*m-n," ").concat(g," ").concat(E),y="".concat(f," ").concat(E," ").concat(v," ").concat(b),w="translate(0, ".concat(-a.heightLines,")"),k=l()(ee.a.pathOuter,Object(x.a)({},ee.a.isClickable,!!d)),N=l()(ee.a.pathInner,(t={},Object(x.a)(t,ee.a.isFaded,c),Object(x.a)(t,ee.a.isClickable,!!d),t));return i.a.createElement("g",{transform:w,className:k},i.a.createElement("path",{d:y,onClick:d}),i.a.createElement("g",{className:N},i.a.createElement("path",{d:y,onClick:d}),function(){if(s&&o>800){var e=(r?-n:-o)+1.5*a.width+m,t=a.heightLines/2;return i.a.createElement(ce,{x:e,y:t,onClick:h})}return null}()))},se=function(e){var t,a=e.nodeGeom,n=e.isFaded,o=e.onClick,c=O.b.overlap,r="M".concat(a.width/2,",").concat(a.heightLines+c),s="".concat(r," V").concat(-c),d="translate(0, ".concat(-a.heightLines,")"),h=l()(ee.a.pathOuter,Object(x.a)({},ee.a.isClickable,!!o)),u=l()(ee.a.pathInner,(t={},Object(x.a)(t,ee.a.isFaded,n),Object(x.a)(t,ee.a.isClickable,!!o),t));return i.a.createElement("g",{transform:d,className:h},i.a.createElement("path",{d:s,onClick:o}),i.a.createElement("g",{className:u},i.a.createElement("path",{d:s,onClick:o})))},de=a("2bbS"),he=a.n(de),ue=function(e){function t(){var e,a,n;Object(u.default)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return Object(p.default)(n,(a=n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(l))),n.state={flash:null},n.nodeRef=i.a.createRef(),n.handleNodeClick=function(e){var t=n.props,a=t.node,i=t.expandNode,o=t.setActive;i(a.id,!a.isExpanded),o(a.id),e.stopPropagation()},n.handleLineClick=function(){var e=n.props,t=e.node,a=e.highlightPath,i=e.setActive;a(t.id,!t.isHighlighted),i(t.id),event.stopPropagation()},n.handleArrowClick=function(){n.scrollNodeIntoView()},n.handleInfoClick=function(){var e=n.props,t=e.node,a=e.activeNode,i=e.setActive,o=document.getElementById("info"),l=document.getElementById("close");t!==a&&(i(t.id),o&&o.click()),t===a&&(o?o.click():l&&l.click()),event.stopPropagation()},a))}return Object(g.default)(t,e),Object(m.default)(t,[{key:"componentDidMount",value:function(){this.props.node.scrollIntoView&&this.isScrollingIntoView()}},{key:"componentDidUpdate",value:function(e){var t=e.node.prevScrollIntoView,a=this.props.node.scrollIntoView;t!==a&&a&&this.isScrollingIntoView()}},{key:"componentWillUnmount",value:function(){this.killFlash()}},{key:"isScrollingIntoView",value:function(){var e=this.props,t=e.node,a=e.scrollIntoView;this.scrollNodeIntoView(),this.flashNode(),a(t.id,!1)}},{key:"flashNode",value:function(){var e=this;this.killFlash(),this.setState({flash:"in"}),this.flashInTimeout=setTimeout(function(){e.setState({flash:"out"}),e.flashOutTimeout=setTimeout(function(){e.setState({flash:null})},1e3)},3e3)}},{key:"killFlash",value:function(){clearTimeout(this.flashInTimeout),clearTimeout(this.flashOutTimeout)}},{key:"scrollNodeIntoView",value:function(){var e=this.props.node,t=O.a(e.contentTypeId),a=e.nodeWidth||t.width,n=e.nodeHeight||t.height,i=this.nodeRef.current.getScreenCTM(),o=a/2,l=n/2,c=i.a*o+i.c*l+i.e,r=i.b*o+i.d*l+i.f,s=c-window.innerWidth/2,d=r-window.innerHeight/2;this.context.scrollBy(s,d)}},{key:"renderInfoButton",value:function(e,t,a){var n=this.props.node;if("Solution"!==n.type&&n.additionalInfo&&n.additionalInfo.length){var o=a-t.strokeWidth-40,l=t.strokeWidth;switch(n.type){case"Strategy":o-=10}return i.a.createElement("g",{transform:"translate(".concat(o,", ").concat(l,")")},i.a.createElement(I,{onClick:this.handleInfoClick,isFaded:e,width:40,height:36}))}return null}},{key:"renderExpandButton",value:function(e,t,a,n){var o=this.props.node;if(o.children){var l=a-t.strokeWidth-40,c=n-t.strokeWidth-36;switch(o.type){case"Strategy":l-=2.5*t.strokeWidth}return i.a.createElement("g",{transform:"translate(".concat(l,", ").concat(c,")")},i.a.createElement(le,{onClick:this.handleNodeClick,isExpanded:o.isExpanded,isFaded:e,width:40,height:36}))}return null}},{key:"renderUndeveloped",value:function(e,t,a,n){var o=this.props.node,l=this.state.flash;if(o.isUndeveloped&&(!o.children||0===o.children.length)&&("Goal"===o.type||"Strategy"===o.type)){var c=a/2,r=n-t.strokeWidth/2;return i.a.createElement(ae,{x:c,y:r,strokeWidth:t.strokeWidth,className:he.a.undevelopedDiamond,isFaded:e,flash:l})}}},{key:"renderLine",value:function(e,t){var a=this.props,n=a.index,o=a.x,l=a.dist,c=a.isRoot,r=a.isHighlightMode,s=a.showLineArrow;return 0===n?i.a.createElement(se,{nodeGeom:t,isFaded:e,onClick:this.handleLineClick}):i.a.createElement(re,{nodeGeom:t,x:o,dist:l,isRoot:c,isFaded:e,isHighlighted:r&&!e,isHighlightMode:r,showLineArrow:s,onClick:this.handleLineClick,onArrowClick:this.handleArrowClick})}},{key:"render",value:function(){var e=this.props,t=e.node,a=e.isRoot,n=e.x,o=e.isHighlightMode,c=this.state.flash,r=t.type||t.contentTypeId,s=o&&!t.isHighlighted,d="Solution"===r,h=O.a(t.contentTypeId),u=t.nodeWidth||h.width,m=t.nodeHeight||h.height,p=Math.max(u,d?220:h.width),f=Math.max(m,d?220:h.height),g=(h.width-p)/2,v=f+h.heightLines,E=l()(he.a.node,Object(x.a)({},he.a.hasChildren,!!t.children));return i.a.createElement("g",{transform:"translate(".concat(n,", 0)")},i.a.createElement("g",{transform:"translate(".concat(g,", 0)"),className:E,onClick:this.handleNodeClick,ref:this.nodeRef},i.a.createElement(Q,{width:p,height:f,nodeType:r,nodeGeom:h,isFaded:s,flash:c}),i.a.createElement(K,{node:t,width:p,height:f,contentWidth:u,contentHeight:m,nodeGeom:h,isFaded:s,isRoot:a,onInfoClick:this.handleInfoClick})),this.renderInfoButton(s,h,p,f),this.renderExpandButton(s,h,p,f),this.renderLine(s,h),this.renderUndeveloped(s,h,p,f),i.a.createElement("g",{transform:"translate(0, ".concat(v,")")},i.a.createElement(fe,{nodes:t.children,isVisible:t.isExpanded})))}}]),t}(i.a.Component);ue.defaultProps={isRoot:!1,isFaded:!1},ue.contextType=d.a;var me=Object(s.b)(function(e){return{isHighlightMode:e.isHighlightMode,activeNode:e.activeNode}},{expandNode:h.d,highlightPath:h.h,setActive:h.l,scrollIntoView:h.k})(ue),pe=function(e){var t=e.nodes,a=e.isRoot,n=e.isVisible,o=e.isHighlightMode;if((a||n)&&t&&t.length>0){var l=0,c=0,r=[],s=t.find(function(e){return e.isHighlighted}),d=!(o&&s);return t.forEach(function(e,t){e.isHighlighted&&(d=!0);var n=i.a.createElement(me,{isRoot:a,index:t,x:l,dist:c,node:e,key:e.id,showLineArrow:d});e.isHighlighted?r.push(n):r.unshift(n),l+=e.w,c=e.w}),r}return null};pe.defaultProps={isRoot:!1,isVisible:!1};var fe=Object(s.b)(function(e){return{isHighlightMode:e.isHighlightMode}})(pe),ge=a("nrRS"),ve=a.n(ge),Ee=Object(s.b)(null,{highlightPath:h.h,setRootSize:h.q})(function(e){var t=e.gsn,a=e.zoom,o=e.fontsLoaded,c=e.handleInfoClick,r=e.highlightPath,s=e.setRootSize,d=t.w,h=t.h,u=t.nodeHeight,m=void 0===u?0:u,p=O.d.margin,f=p.left+d+p.right,g=p.top+h+m+p.bottom,v=p.top+m+O.c.heightLines,E=l()(ve.a.root,Object(x.a)({},ve.a.isHidden,!m||!o)),b=Object(n.useRef)(),y=Object(n.useRef)();Object(n.useEffect)(function(){var e=function(){if(o){var e=y.current.getBoundingClientRect(),a=t.children.reduce(function(e,t){var a=O.a(t.contentTypeId);return e+(t.nodeWidth||a.width)+O.c.gap},0),n=Math.min((window.innerWidth-100)/(O.d.margin.left+a+O.d.margin.right),1);s(e.width,e.height,n)}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[t.children,a,s,o]);return i.a.createElement("section",{className:E},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:f*a,height:g*a,viewBox:"0 0 ".concat(f*a," ").concat(g*a),onClick:function(e){e.target===b.current&&r(null)},ref:b},i.a.createElement("g",{transform:"scale(".concat(a,")")},i.a.createElement("foreignObject",{x:"0",y:p.top,width:f,height:m},i.a.createElement(V.a,{as:"h1",theme:"largeHeadline",className:ve.a.headline,ref:y},t.description,t.additionalInfo?i.a.createElement("svg",{className:ve.a.infoButton},i.a.createElement("g",null,i.a.createElement(I,{onClick:c,width:40,height:36}))):null)),i.a.createElement("g",{transform:"translate(0, ".concat(v,")")},i.a.createElement(fe,{isRoot:!0,nodes:t.children})))),i.a.createElement(Y,{gsn:t,gsnWidth:f,gsnHeight:g}))}),be=a("FYNm"),ye=a.n(be),we=function(e){function t(){var e,a,n;Object(u.default)(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return Object(p.default)(n,(a=n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(o))),n.state={isExpanded:n.props.expanded},n.toggleExpanded=function(){n.setState(function(e){return{isExpanded:!e.isExpanded}})},a))}return Object(g.default)(t,e),Object(m.default)(t,[{key:"componentDidUpdate",value:function(e){e.expanded!==this.props.expanded&&this.setState({isExpanded:this.props.expanded})}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.children,o=t.title,c=t.numbered,r=t.i,s=t.theme,d=this.state.isExpanded,h=l()(ye.a.accordion,a,Object(x.a)({},ye.a.expanded,d));return i.a.createElement("div",{className:h},i.a.createElement("div",{className:ye.a.header,onClick:function(){return e.toggleExpanded()}},i.a.createElement("div",{className:ye.a.title},c&&i.a.createElement(V.a,{as:"span",theme:"bodyCopyBold",className:ye.a.number},"0",r+1,i.a.createElement(U.a,{iconType:"arrow",width:20,height:20})),i.a.createElement(V.a,{as:"h3",theme:s},o)),i.a.createElement("svg",{className:ye.a.expandIcon},i.a.createElement(le,{width:30,height:26,inPanel:!0,isExpanded:d}))),i.a.createElement("div",{className:ye.a.body},n))}}]),t}(n.Component);we.defaultProps={classname:null,expanded:!0,numbered:!1,theme:"bodyCopyBold"};var ke=we,Ne=a("w2//"),Ce=a("aRZs"),xe=a.n(Ce),Oe=function(e){var t=e.heading,a=e.items;return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{as:"h2",theme:"mediumHeadline",className:xe.a.heading},t),i.a.createElement("div",{className:xe.a.accordionContainer},a.map(function(e,t){return i.a.createElement(ke,{key:"topic-".concat(t),className:xe.a.topicWrapper,title:e.title,expanded:!1,theme:"helpLabel"},e.description.map(function(e,t){return"markdownBlock"===e.contentTypeId?i.a.createElement(Ne.a,{key:"description-".concat(t)},e.content):i.a.createElement("ul",{key:"description-".concat(t),className:xe.a.list},e.listItems.map(function(e,t){var a=l()(xe.a.listItem,Object(x.a)({},xe.a.glossary,!e.iconType));return i.a.createElement("li",{key:"item-".concat(t),className:a},e.iconType&&i.a.createElement(U.a,{iconType:e.iconType}),i.a.createElement("div",{className:xe.a.content},i.a.createElement(V.a,{as:"span",theme:"bodyCopyBold",className:xe.a.title},e.title),i.a.createElement(Ne.a,null,e.description)))}))}))})))},je=a("CwTm"),Se=a.n(je);var Te=function(e){var t=e.label,a=e.additionalInfo;return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{as:"h2",theme:"label",className:Se.a.heading},t),i.a.createElement("div",{className:Se.a.infoBlocks},a?a.map(function(e,t){var a=function(e){switch(e){case"Assumption":case"Justification":return"ellipse";case"Context":return"capsule";case"Strategy":return"parallelogram"}return null}(e.type);return i.a.createElement("div",{key:"info-block-".concat(t),className:Se.a.infoBlock},i.a.createElement(V.a,{as:"h3",theme:"bodyCopyBold",className:Se.a.label},null!==a&&i.a.createElement(U.a,{iconType:a,width:15,height:10}),e.type),i.a.createElement(V.a,{as:"p",theme:"bodyCopy",className:Se.a.description},e.description))}):i.a.createElement(V.a,{as:"p",theme:"bodyCopy"},"No additional information")))},Ie=a("Cmf2"),Pe=a.n(Ie),Fe=Object(s.b)(function(e){return{activeGoalFilters:e.activeGoalFilters}},{setActiveGoalFilters:h.m})(function(e){var t=e.goals,a=e.activeGoalFilters,n=e.setActiveGoalFilters,o=function(e){return function(){var t=a.concat(),i=t.indexOf(e);i>=0?t.splice(i,1):t.push(e),n(t)}};return i.a.createElement("div",{className:Pe.a.goalFilterContainer},i.a.createElement("button",{onClick:function(){n([])},className:l()(Pe.a.goalFilterButton,Object(x.a)({},Pe.a.disabled,a.length>0))},i.a.createElement(V.a,{as:"span",theme:"bodyCopyBold"},"All")),t.map(function(e){var t=l()(Pe.a.goalFilterButton,Object(x.a)({},Pe.a.disabled,!a.includes(e.id)));return i.a.createElement("button",{key:e.id,className:t,onClick:o(e.id)},i.a.createElement(V.a,{as:"span",theme:"bodyCopyBold"},"G",e.id))}))}),ze=a("f2Ar"),Le=a.n(ze),Ae=function(e){var t=e.iconType,a=e.isActive,n=e.label,o=e.onClick,c=l()(Le.a.filter,Object(x.a)({},Le.a.active,a));return i.a.createElement("button",{className:c,onClick:o},i.a.createElement(U.a,{iconType:t,classNames:Le.a.icon,width:13,height:10}),i.a.createElement(V.a,{as:"span",theme:"filter",className:Le.a.label},n),a&&i.a.createElement(U.a,{iconType:"checkmark",width:12,height:10}))},Me=a("CzA3"),Re=a.n(Me),He=Object(s.b)(function(e){return{activeNodeTypeFilters:e.activeNodeTypeFilters}},{setActiveNodeTypeFilters:h.n})(function(e){var t=e.searchFilters,a=e.activeNodeTypeFilters,n=e.setActiveNodeTypeFilters,o=function(e){return function(){var t=a.concat(),i=t.indexOf(e);i>=0?t.splice(i,1):t.push(e),n(t)}};return i.a.createElement("div",{className:Re.a.nodeTypeFilterContainer},t.map(function(e){var t=e.nodeType,n=e.label,l=a.includes(t),c=Object(d.e)(t);return i.a.createElement(Ae,{key:t,iconType:c,label:n,isActive:l,onClick:o(t)})}))}),We=a("M+jP"),Be=a.n(We),Ge=function e(t){var a=t.result,n=t.onClick,o=a.node,l=o.type||o.contentTypeId,c=Object(d.e)(l),r=null!=a.parentId,s=function(e,t){var a=[],n=t.toLowerCase();e.terms.forEach(function(e){for(var t=0;-1!==t;)if((t=n.indexOf(e,t))>=0){var i=a.find(function(e){return e[0]===t});if(i){if(i[1]-i[0]<e.length){var o=a.indexOf(i);a[o]=[t,t+e.length]}}else a.push([t,t+e.length]);t+=e.length}});var o=a.sort(function(e,t){return e[0]-t[0]}),l=[],c=0;return o.forEach(function(e){var a=Object(L.default)(e,2),n=a[0],o=a[1];c<n&&l.push(t.substring(c,n)),l.push(i.a.createElement("span",{key:"".concat(n,"_").concat(o),className:Be.a.mark},[t.substring(n,o)])),c=o}),c<t.length&&l.push(t.substring(c)),l},h=function(){if(null!=c&&"Info"!==c)return i.a.createElement(U.a,{iconType:c,className:Be.a.icon,width:13,height:10})},u=r?Be.a.resultItemAdditional:Be.a.resultItem;return i.a.createElement("li",{key:o.id,className:u,onClick:n},r?h():i.a.createElement(V.a,{as:"h3",theme:"bodyCopyBold",className:Be.a.title},h(),o.label,o.headline&&i.a.createElement("span",{className:Be.a.headline},s(a,o.headline))),i.a.createElement(V.a,{as:"p",theme:"bodyCopy",className:Be.a.description},s(a,o.description)),a.additionalInfo&&a.additionalInfo.length>0&&i.a.createElement("ol",{className:Be.a.additionalItems},a.additionalInfo.map(function(t){return i.a.createElement(e,{result:t,key:t.id})})))},Ue=a("L2Sh"),Ve=a.n(Ue),De=function(e){function t(){var e,a,n;Object(u.default)(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return Object(p.default)(n,(a=n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(o))),n.handleChange=function(e){n.props.setSearchTerm(e.target.value)},n.handleClearClick=function(){n.props.resetSearch()},n.handleResultClick=function(e){return function(){n.props.expandNode(e,!0,!0),n.props.setActive(e)}},n.handleSubmit=function(e){e.preventDefault()},a))}return Object(g.default)(t,e),Object(m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.searchTerm,n=t.searchResults,o=t.searchFilters,l=t.goals;return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",{className:Ve.a.searchHeader},i.a.createElement("form",{onSubmit:this.handleSubmit,className:Ve.a.searchForm},i.a.createElement(U.a,{iconType:"search",className:Ve.a.searchIcon}),i.a.createElement("input",{type:"text",placeholder:"Search",value:a,onChange:this.handleChange,className:Ve.a.searchInput}),!!n.length&&!!a.length&&i.a.createElement(V.a,{as:"span",theme:"smallCopy"},n.length," results",i.a.createElement("button",{onClick:this.handleClearClick,className:Ve.a.clearButton},"Clear"))),i.a.createElement(Fe,{goals:l}),i.a.createElement(He,{searchFilters:o})),i.a.createElement("ol",{className:Ve.a.searchResultContainer},n.map(function(t){return i.a.createElement(Ge,{result:t,onClick:e.handleResultClick(t.node.id),key:t.node.id})})))}}]),t}(n.Component),Ze=Object(s.b)(function(e){return{goals:e.data.children,searchFilters:e.searchFilters,searchTerm:e.searchTerm,searchResults:e.searchResults}},{setSearchTerm:h.r,resetSearch:h.j,expandNode:h.d,setActive:h.l})(De),Ye=a("Qj34"),Xe=a.n(Ye),_e=function(e){var t,a=e.isOpen,o=e.type,c=e.helpPanel,r=e.infoPanel,s=e.setGsnScrollState,d=l()(Xe.a.panel,(t={},Object(x.a)(t,Xe.a.open,a),Object(x.a)(t,Xe.a.help,"help"===o),t)),h=Object(n.useRef)();Object(n.useEffect)(function(){var e=h.current;return e.addEventListener("mouseenter",u),function(){e.removeEventListener("mouseenter",u)}},[]);var u=function(){s(!1),h.current.addEventListener("mouseleave",m)},m=function e(){s(!0),h.current.removeEventListener("mouseleave",e)};return i.a.createElement("div",{ref:h,className:d},a&&"search"===o?i.a.createElement(Ze,null):a&&"info"===o?i.a.createElement(Te,r):a&&"help"===o?i.a.createElement(Oe,c):null)};_e.defaultProps={isOpen:!1};var Qe=Object(s.b)(null,{setGsnScrollState:h.o})(_e),Je=a("pISu"),qe=a.n(Je),Ke=[.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3],$e=Ke.findIndex(function(e){return 1===e}),et=function(e){function t(){var e,a,n;Object(u.default)(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return Object(p.default)(n,(a=n=Object(p.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(o))),n.state={panelOpen:!1,panelType:null,allExpanded:!1,zoomIndex:$e},n.expandToggle=function(){n.setState(function(){return{allExpanded:!n.state.allExpanded}}),n.handleExpandAll()},n.handleExpandAll=function(){var e=n.state.allExpanded,t=n.props,a=t.expandAll,i=t.expandGoal,o=t.activePath,l=t.data,c=l.children.filter(function(e){return e.isExpanded});c.length&&c.length!==l.children.length?i(o[1].id,!e):a(!e)},n.zoomIn=function(){n.setState(function(e,t){if(e.zoomIndex<Ke.length-1){var a=e.zoomIndex+1;return t.setUserZoom(Ke[a]),{zoomIndex:a}}return null})},n.zoomOut=function(){n.setState(function(e,t){if(e.zoomIndex>0){var a=e.zoomIndex-1;return t.setUserZoom(Ke[a]),{zoomIndex:a}}return null})},n.zoomReset=function(){n.setState({zoomIndex:$e}),n.props.setUserZoom(1)},n.panelToggle=function(e){return function(){var t=n.state,a=t.panelOpen,i=t.panelType;e===i&&a?n.setState({panelType:null,panelOpen:!1}):n.setState({panelType:e,panelOpen:!0})}},a))}return Object(g.default)(t,e),Object(m.default)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.activePath;e.activePath&&e.activePath&&e.activePath[1]!==t[1]&&this.setState(function(){return{allExpanded:!1}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.helpPanel,o=t.activeNode,c=t.activePath,r=this.state,s=r.allExpanded,d=r.panelOpen,h=r.panelType,u=r.zoomIndex,m=o||a,p=a.children.filter(function(e){return e.isExpanded}),f=!p.length||p.length===a.children.length||c.length<2?"all":"G".concat(c[1].id);return i.a.createElement("div",{className:qe.a.toolbar},i.a.createElement("div",{className:qe.a.topNav},[{iconType:"search",label:"Search"},{iconType:"info",label:"More info"},{iconType:"help",label:"Help"}].map(function(t,a){var n=h===t.iconType?"close":t.iconType;return i.a.createElement("button",{key:"navItem-".concat(a),id:n,className:l()(qe.a.navItem,"close"===n&&qe.a.active),onClick:e.panelToggle(t.iconType)},i.a.createElement("span",{className:qe.a.navLabel},t.label),i.a.createElement(U.a,{iconType:n,width:22,height:22}))}),i.a.createElement("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/",rel:"noopener noreferrer",target:"_blank",className:l()(qe.a.navItem,qe.a.navItemCC0)},i.a.createElement("span",{className:qe.a.navLabel},"Creative Commons Zero"," ",i.a.createElement(U.a,{className:qe.a.navLabelIcon,iconType:"externalLink",width:10,height:10})),i.a.createElement(U.a,{iconType:"creativeCommons",width:23,height:23}))),i.a.createElement("div",{className:qe.a.bottomNav},i.a.createElement("button",{className:qe.a.navItem,onClick:this.expandToggle},i.a.createElement("span",{className:qe.a.navLabel},s?"Collapse":"Expand"," ",f),i.a.createElement(U.a,{iconType:s?"collapse":"expand",width:30,height:30})),i.a.createElement("button",{onClick:this.zoomIn,className:qe.a.navItem,disabled:u===Ke.length-1},i.a.createElement("span",{className:qe.a.navLabel},"Zoom in"),i.a.createElement(U.a,{iconType:"zoomIn",width:22,height:22})),i.a.createElement("button",{onClick:this.zoomOut,className:qe.a.navItem,disabled:0===u},i.a.createElement("span",{className:qe.a.navLabel},"Zoom out"),i.a.createElement(U.a,{iconType:"zoomOut",width:22,height:22})),i.a.createElement("button",{onClick:this.zoomReset,className:qe.a.navItem,disabled:u===$e},i.a.createElement("span",{className:qe.a.navLabel},"Reset zoom"),i.a.createElement(U.a,{iconType:"zoomReset",width:22,height:22}))),i.a.createElement(Qe,{isOpen:d,type:h,helpPanel:n,infoPanel:m,data:a}))}}]),t}(n.Component),tt=Object(s.b)(function(e){return{activeNode:e.activeNode,activePath:e.activePath,data:e.data,zoom:e.zoom}},{expandAll:h.b,expandGoal:h.c,setUserZoom:h.s})(et),at=a("diuB"),nt=a.n(at),it=function(e){var t=e.data,a=e.zoom,o=e.activeNode,c=e.helpAccordion,s=e.nodeMeasureQueue,h=e.fontsLoaded,u=e.setUserZoom,m=e.setActive,p=e.setMeasuredNodes,f=e.setGsnScrollState,g=e.expandAll,v=e.scrollAllowed,E=Object(n.useRef)(null),b=Object(n.useRef)(null);Object(n.useEffect)(function(){return function(){u(1),m(t.id),g(!1),f(!0)}},[]),Object(n.useEffect)(function(){if(s.length){for(var e={},t=performance.now(),a=0;a<s.length&&performance.now()-t<1e3/60;){var n=s[a];e[n.id]=b.current.measure(n),a++}p(e)}},[s,p]);return i.a.createElement(i.a.Fragment,null,function(){var e=t.shareImage.file;return i.a.createElement(r.a,null,i.a.createElement("meta",{key:"meta-description",name:"description",content:t.metaDescription}),i.a.createElement("meta",{key:"meta-og-url",property:"og:url",content:"https://uberatg.com/safetycase/gsn"}),i.a.createElement("meta",{key:"meta-og-title",property:"og:title",content:t.title}),i.a.createElement("meta",{key:"meta-og-description",property:"og:description",content:t.metaDescription}),i.a.createElement("meta",{key:"meta-og-image",property:"og:image",content:e.url}),i.a.createElement("meta",{key:"meta-og-image-width",property:"og:image:width",content:e.details.image.width}),i.a.createElement("meta",{key:"meta-og-image-height",property:"og:image:height",content:e.details.image.height}),i.a.createElement("title",{key:"title"},t.title))}(),i.a.createElement(d.a.Provider,{value:{scrollBy:function(e,t){var a=E.current,n=a.scrollLeft,i=a.scrollTop;E.current.scrollTo({left:n+e,top:i+t,behavior:"smooth"})}}},i.a.createElement("main",{className:l()(nt.a.gsn,!v&&"noscroll"),ref:E},i.a.createElement(k,null),i.a.createElement(Ee,{gsn:t,zoom:a,fontsLoaded:h,handleInfoClick:function(){var e=document.getElementById("info"),a=document.getElementById("close");t!==o&&(m(t.id),e&&e.click()),t===o&&(e?e.click():a&&a.click())}}),i.a.createElement(tt,{helpPanel:c}),i.a.createElement(C.default,{ref:b}),i.a.createElement(N.default,{mobileMessage:t.mobileMessage,buttonText:t.buttonText}))))};it.getInitialProps=function(e){var t=e.store;return t.dispatch(Object(h.f)()).then(function(){var e=t.getState();return{data:e.data,helpAccordion:e.helpAccordion}})};t.default=Object(s.b)(function(e){return{data:e.data,zoom:e.zoom,helpAccordion:e.helpAccordion,activeNode:e.activeNode,nodeMeasureQueue:e.nodeMeasureQueue,scrollAllowed:e.scrollAllowed}},{setUserZoom:h.s,setActive:h.l,setMeasuredNodes:h.p,expandAll:h.b,fetchHelpAccordionBlock:h.f,setGsnScrollState:h.o})(it)}},[["DtPh",1,0,2]]]);
//# sourceMappingURL=gsn.js.map